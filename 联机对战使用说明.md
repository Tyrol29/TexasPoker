# 德州扑克 - 联机对战使用说明

## 快速开始

### 方式一：局域网（同一WiFi）

**房主（创建房间）：**
1. 运行游戏，选择 **"3. 创建房间 (联机对战)"**
2. 输入您的名称
3. 选择AI玩家数量（0-7）
4. 系统会显示您的IPv4地址，如：`192.168.1.5:8888`
5. 把这个地址告诉朋友
6. 等待朋友加入后，输入 `start` 开始游戏

**朋友（加入房间）：**
1. 运行游戏，选择 **"4. 加入房间 (联机对战)"**
2. 输入您的名称
3. 输入房主给的IPv4地址（如：`192.168.1.5`）
4. 等待房主开始游戏

---

### 方式二：IPv6直连（推荐，无需同一网络）

**适用条件：**
- 双方网络都支持IPv6
- 可通过 https://test-ipv6.com 检测是否支持

**房主：**
1. 创建房间时会显示IPv6地址，如：`[2408:8207:1234::1]:8888`
2. 复制完整的IPv6地址分享给朋友

**朋友：**
1. 输入完整的IPv6地址（可以带或不带方括号）
2. 例如：`2408:8207:1234::1` 或 `[2408:8207:1234::1]`

**优点：**
- ✅ 无需内网穿透工具
- ✅ 速度快，延迟低
- ✅ 无需配置路由器

---

### 方式三：内网穿透（不同网络且不支持IPv6时）

当双方不在同一局域网，且不支持IPv6时使用。

#### 方法1：Ngrok（最简单）

**房主：**
1. 下载 ngrok：https://ngrok.com/download
2. 注册免费账号，获取 authtoken
3. 打开命令行，运行：`ngrok tcp 8888`
4. 会得到一个地址，如：`tcp://1.tcp.ngrok.io:12345`
5. 把 `1.tcp.ngrok.io` 和端口 `12345` 告诉朋友

**朋友：**
1. 输入地址 `1.tcp.ngrok.io`
2. 端口改为 `12345`

#### 方法2：花生壳（国内稳定）

1. 下载花生壳客户端：https://hsk.oray.com/
2. 注册账号，获取免费域名
3. 添加映射：外网端口 → 内网 `8888` 端口
4. 把域名分享给朋友

#### 方法3：SakuraFrp（免费，国内速度快）

1. 注册：https://www.natfrp.org/
2. 下载客户端，创建TCP隧道
3. 本地端口填 `8888`
4. 获得远程地址后分享给朋友

---

## 游戏操作

### 通用操作
- **行动时间**：每回合15秒倒计时
- **超时处理**：超时后自动弃牌（Fold）
- **退出游戏**：按 `Ctrl+C` 可退出

### 客户端操作（加入房间的玩家）
当轮到您行动时，输入：
- `f` 或 `fold` - 弃牌
- `c` 或 `call` - 跟注
- `r 金额` 或 `raise 金额` - 加注（如：`r 100`）
- `a` 或 `allin` - 全押

**倒计时提示：**
- 剩余5秒时会显示倒计时
- 建议提前想好操作

---

## 常见问题

### Q: 朋友无法连接到我
**可能原因：**
1. **防火墙拦截** - 确保Windows防火墙允许游戏通过
2. **路由器设置** - 如果是IPv4，可能需要端口映射
3. **地址错误** - 确认朋友输入的地址正确

**解决方法：**
- 优先尝试IPv6（如果支持）
- 使用内网穿透工具（ngrok等）
- 关闭Windows防火墙测试（仅测试）

### Q: 怎么知道我的网络是否支持IPv6？
访问 https://test-ipv6.com ，如果显示10/10就是支持。

### Q: IPv6地址格式怎么输入？
- 可以输入：`2408:8207:1234::1`
- 也可以输入：`[2408:8207:1234::1]`
- 程序会自动处理

### Q: 游戏支持多少人同时玩？
最多8人（房主 + 7个远程玩家），AI数量0-7人可调。

### Q: 断线了怎么办？
- 短暂断线：程序会尝试重连
- 长时间断线：自动视为弃牌
- 房主断线：所有人游戏结束

### Q: 手机可以玩吗？
目前只支持Windows PC。如果要手机玩，需要：
1. 用电脑开房间
2. 手机使用远程桌面连接电脑
3. 或者等待后续开发手机版

---

## 技术说明

### 端口
- 默认使用 `8888` 端口
- 如果端口被占用，程序会提示

### 协议
- TCP协议传输
- 支持IPv4和IPv6双栈
- 消息加密：暂无（局域网/IPv6直连相对安全）

### 延迟
- 局域网：1-5ms
- IPv6直连：10-50ms（取决于网络）
- 内网穿透：50-200ms（取决于服务商）

---

## 建议

1. **优先使用IPv6** - 如果双方都支持，这是最方便的方式
2. **其次使用局域网** - 聚会时最稳定
3. **内网穿透备用** - 远程对战时使用

## 反馈

如有问题或建议，请联系开发团队。
